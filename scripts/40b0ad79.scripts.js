(function(){"use strict";angular.module("ichingApp",["ngRoute","ngSanitize"]).config(["$routeProvider","$locationProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/chumbroskis",{templateUrl:"views/main.html",controller:"ChumbroskiCtrl"}).when("/browse/:hexagram?",{templateUrl:"views/browse.html",controller:"BrowseCtrl"}).when("/consult",{templateUrl:"views/consult.html",controller:"ConsultCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("ichingApp").controller("MainCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";angular.module("ichingApp").service("BookOfChanges",["$http","$q",function(a,b){var c,d,e=this;return c=b.defer(),d=c.promise,a.get("/data/iching-pretty.json").success(function(a){return c.resolve(a)}),this.hexagrams={byID:function(a){return d.then(function(b){var c,d,e,f;for(f=b.hexagrams,d=0,e=f.length;e>d;d++)if(c=f[d],c.id===a)return c;return null})},all:function(){return d.then(function(a){return a.hexagrams})},byTrigrams:function(a){return d.then(function(b){var c,d,e,f;for(f=b.hexagrams,d=0,e=f.length;e>d;d++)if(c=f[d],c.trigrams[0]===a[0]&&c.trigrams[1]===a[1])return c;return null})}},this.trigrams={byID:function(a){return d.then(function(b){var c,d,e,f;for(f=b.trigrams,d=0,e=f.length;e>d;d++)if(c=f[d],c.id===a)return c;return null})},all:function(){return d.then(function(a){return a.trigrams})},byBinary:function(a){return d.then(function(b){var c,d,e,f;for(f=b.trigrams,d=0,e=f.length;e>d;d++)if(c=f[d],c.binary===a)return c;return null})}},this.fromFormulas=function(a){return b.all(a.map(function(a){var c;return c=[a.slice(0,3),a.slice(3,7)],b.all(c.map(function(a){return e.trigrams.byBinary(a).then(angular.identity)}))})).then(function(a){return b.all(a.map(function(a){var b;return b=a.map(function(a){return parseInt(a.id,10)}),e.hexagrams.byTrigrams(b).then(function(b){return{hexagram:b,trigrams:a}})}))}).then(function(a){return{result:a}})},this}])}.call(this),function(){"use strict";angular.module("ichingApp").controller("BrowseCtrl",["$scope","BookOfChanges","$routeParams",function(a,b,c){return b.hexagrams.all().then(function(b){return a.hexagrams=b}),a.setHexagram=function(d){return b.hexagrams.byID(d).then(function(b){return a.hexagram=b,c.hexagram=b.id})},c.hexagram?a.setHexagram(c.hexagram):void 0}])}.call(this),function(){"use strict";angular.module("ichingApp").controller("ConsultCtrl",["$scope","$q","$location","BookOfChanges","ConsultationMethods",function(a,b,c,d,e){var f,g;return g=c.search(),"string"==typeof g.roll&&(a.result=f=e.rollToFormulas(g.roll),d.fromFormulas(f.formulas).then(function(b){return a.result=angular.extend(b,a.result)})),a.setMode=function(b){return a.mode=b},a.roll=function(){return c.search("roll",e.roll())}}])}.call(this),function(){"use strict";angular.module("ichingApp").filter("linebreaks",function(){return function(a){return a?a.replace(/\n/g,"<br/>"):void 0}})}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("ichingApp").directive("hexagramSvg",function(){return{template:'<svg class="svg" xmlns="http://www.w3.org/2000/svg" width="116px" height="145px" screwviewBox=\'0 0 100 100\'>\n  <g ng-repeat="line in lines">\n    <path ng-show="line.type == \'yin\'" ng-attr-stroke-width="{{linestrokewidth}}" stroke="#000" stroke-dasharray="40,20,40" ng-attr-d="M0,{{height - $index * spacing}} l100,0"/>\n    <circle ng-show="line.type == \'yang\' && line.old" cx="50" ng-attr-cy="{{height - $index * spacing}}" r="10" stroke="#000" stroke-width="2" fill="transparent"></circle>\n    <path ng-show="line.type == \'yang\'" ng-attr-stroke-width="{{linestrokewidth}}" stroke="#000" stroke-dasharray="" ng-attr-d="M0,{{height - $index * spacing}} l100,0"/>\n    <path ng-show="line.type == \'yin\' && line.old" stroke-width="2" stroke="#000" stroke-dasharray="" ng-attr-d="M40,{{height - $index * spacing - 10}} l20,20 m0,-20 l-20,20"/>\n  </g>\n</svg>',scope:{roll:"=hexagramRoll"},restrict:"E",controller:["$scope",function(b){return b.$watch("roll",function(c){return b.lines=c.split("").map(function(b){return{type:a.call("68",b)>=0?"yin":"yang",old:a.call("69",b)>=0}})}),b.spacing=20,b.height=130,b.linestrokewidth=10}],link:function(){}}})}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("ichingApp").service("ConsultationMethods",function(){var b;return b=this.rollDice=function(){var a,b,c;for(c=[],a=b=1;2>=b;a=++b)c.push(Math.floor(6*Math.random())+1);return c},this.rollToFormulas=function(b){var c,d,e,f,g,h,i,j;for(e=[""],h=[b,""],d=null,c=!1,f=i=0,j=b.length;j>i;f=++i)g=b[f],a.call("69",g)>=0&&!c?(c=!0,d=f+1,e.push(e[0]),e[1]+=a.call("79",g)>=0?0:1,h[1]+=a.call("79",g)>=0?8:7):c?(e[1]+=a.call("79",g)>=0?1:0,h[1]+=a.call("79",g)>=0?7:8):h[1]+=a.call("79",g)>=0?7:8,e[0]+=a.call("79",g)>=0?1:0;return{rolls:h,formulas:e,changing:c,changingLine:d}},this.roll=function(){var a,c,d,e,f,g,h;for(a="",c=function(a){return a%2===0},e=h=1;6>=h;e=++h)d=b().every(c)?2:3,g=b().map(function(a){return c(a)?2:3}).reduce(function(a,b){return a+b}),f=d+g,a+=f;return a},this})}.call(this),function(){"use strict";angular.module("ichingApp").filter("replace",function(){return function(a,b,c){return a.replace(RegExp(b,"g"),c)}})}.call(this);